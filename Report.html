<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Model SPZ</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Report_files/libs/clipboard/clipboard.min.js"></script>
<script src="Report_files/libs/quarto-html/quarto.js"></script>
<script src="Report_files/libs/quarto-html/popper.min.js"></script>
<script src="Report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Report_files/libs/quarto-html/anchor.min.js"></script>
<link href="Report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Model SPZ</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="quarto" class="level2">
<h2 class="anchored" data-anchor-id="quarto">Quarto</h2>
<p>Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <a href="https://quarto.org" class="uri">https://quarto.org</a>.</p>
</section>
<section id="running-code" class="level2">
<h2 class="anchored" data-anchor-id="running-code">Running Code</h2>
<p>When you click the <strong>Render</strong> button a document will be generated that includes both content and the output of embedded code. You can embed code like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/boris/Desktop/data hospital"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#We upload data</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>codes <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"codes_2phases.xlsx"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(codes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  code1   date                code2  
  &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt;  
1 6012487 2017-12-07 00:00:00 6014266
2 6023881 2018-12-06 00:00:00 6025255
3 6028398 2019-04-09 00:00:00 6028919
4 6040865 2020-08-10 00:00:00 6041525
5 6043203 2020-10-30 00:00:00 6043916
6 6017204 2018-04-30 00:00:00 6018809</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SCIM values 2017-2020</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>SCIM_17_20 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Auswertung_SCIM_2017-20201.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in F4131 / R4131C6: got 'ja'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(SCIM_17_20)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "NR"                            "PATIENT_NR"                   
 [3] "FALL_NR"                       "FID"                          
 [5] "KURZZEICHEN"                   "LASTMEASURE"                  
 [7] "SP_NAHRUNG"                    "SP_WASCHEN_OBER"              
 [9] "SP_WASCHEN_UNTER"              "SP_ANZIEHEN_OBER"             
[11] "SP_ANZIEHEN_UNTER"             "SP_GESICHT"                   
[13] "SP_SUB"                        "AS_ATMUNG"                    
[15] "AS_BLASE"                      "AS_DARM"                      
[17] "AS_TOILETTE"                   "AS_SUB"                       
[19] "MH_BETT"                       "MH_TRANSFER_BETT"             
[21] "MH_TRANSFER_WC"                "MH_SUB"                       
[23] "MA_HAUS"                       "MA_MITTLERE_DISTANZ"          
[25] "MA_AUSSER_HAUS"                "MA_TREPPEN"                   
[27] "MA_TRANSFER_AUTO"              "MA_TRANSFER_BODEN"            
[29] "MA_SUB"                        "SCIM_TOTAL"                   
[31] "DATUM"                         "ERZEUGER"                     
[33] "ERZEUGUNGSDATUM"               "AENDERER"                     
[35] "AENDERUNGSDATUM"               "ERZ_CLIENT_INFO"              
[37] "ERSTELLER_ERGO"                "ERSTELLER_PFLEGE"             
[39] "ERSTELLER_PHYSIO"              "SP_NAHRUNG_AE"                
[41] "SP_WASCHEN_OBER_AE"            "SP_WASCHEN_UNTER_AE"          
[43] "SP_ANZIEHEN_OBER_AE"           "SP_ANZIEHEN_UNTER_AE"         
[45] "SP_GESICHT_AE"                 "AS_ATMUNG_AE"                 
[47] "AS_BLASE_AE"                   "AS_DARM_AE"                   
[49] "AS_TOILETTE_AE"                "MH_BETT_AE"                   
[51] "MH_TRANSFER_BETT_AE"           "MH_TRANSFER_WC_AE"            
[53] "MA_HAUS_AE"                    "MA_MITTLERE_DISTANZ_AE"       
[55] "MA_AUSSER_HAUS_AE"             "MA_TREPPEN_AE"                
[57] "MA_TRANSFER_AUTO_AE"           "MA_TRANSFER_BODEN_AE"         
[59] "KF_VERSTEHEN_AE"               "KF_VERSTEHEN"                 
[61] "KF_KOMMUNIKATION_VERSTEHEN"    "KF_KOMMUNIKATION_VERSTEHEN_AE"
[63] "KF_AUSDRUCK"                   "KF_AUSDRUCK_AE"               
[65] "KF_KOMMUNIKATION_AUSDRUCK"     "KF_KOMMUNIKATION_AUSDRUCK_AE" 
[67] "KF_SOZIALES_VERHALTEN"         "KF_SOZIALES_VERHALTEN_AE"     
[69] "KF_PROBLEM_LOESUNG"            "KF_PROBLEM_LOESUNG_AE"        
[71] "KF_SUB"                       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We convert the patient code to character</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>SCIM_17_20<span class="ot">&lt;-</span>SCIM_17_20 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">FID=</span><span class="fu">as.character</span>(FID))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(SCIM_17_20)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 71
     NR PATIENT_NR FALL_NR FID   KURZZ…¹ LASTM…² SP_NA…³ SP_WA…⁴ SP_WA…⁵ SP_AN…⁶
  &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;lgl&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
1 36604      73510      34 5205… CUS     NA      0       0       0       0      
2 38222     396796       2 5207… HON     NA      1       0       0       0      
3 38801     398190       3 5208… ROBA    NA      2       1       0       0      
4 39684     399299       2 5211… PRB     NA      0       0       0       0      
5 39967     400212       1 5211… JME     NA      0       0       0       0      
6 39942     399420       3 5211… KAJE    NA      2       0       0       0      
# … with 61 more variables: SP_ANZIEHEN_UNTER &lt;chr&gt;, SP_GESICHT &lt;chr&gt;,
#   SP_SUB &lt;chr&gt;, AS_ATMUNG &lt;chr&gt;, AS_BLASE &lt;chr&gt;, AS_DARM &lt;chr&gt;,
#   AS_TOILETTE &lt;chr&gt;, AS_SUB &lt;chr&gt;, MH_BETT &lt;chr&gt;, MH_TRANSFER_BETT &lt;chr&gt;,
#   MH_TRANSFER_WC &lt;chr&gt;, MH_SUB &lt;chr&gt;, MA_HAUS &lt;chr&gt;,
#   MA_MITTLERE_DISTANZ &lt;chr&gt;, MA_AUSSER_HAUS &lt;chr&gt;, MA_TREPPEN &lt;chr&gt;,
#   MA_TRANSFER_AUTO &lt;chr&gt;, MA_TRANSFER_BODEN &lt;chr&gt;, MA_SUB &lt;chr&gt;,
#   SCIM_TOTAL &lt;chr&gt;, DATUM &lt;dttm&gt;, ERZEUGER &lt;chr&gt;, ERZEUGUNGSDATUM &lt;dttm&gt;, …</code></pre>
</div>
</div>
<p>From the previous data set we need to know that the key variable that identifies every row is the column FID. Note that FID means case identification number. FID:Fallidentifikationsnummer</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>SCIM_17_20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID)<span class="sc">%&gt;%</span><span class="fu">table</span>() <span class="sc">%&gt;%</span><span class="fu">data.frame</span>()<span class="sc">%&gt;%</span><span class="fu">select</span>(Freq)<span class="sc">%&gt;%</span> <span class="fu">table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Freq
   1    2 
1119 3240 </code></pre>
</div>
</div>
<p>From the last outcome we observe that there are FID repeated at most two times. It probably means two different SCIM values. In fact Let’s select the five FID values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fives<span class="ot">&lt;-</span>SCIM_17_20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID)<span class="sc">%&gt;%</span><span class="fu">table</span>() <span class="sc">%&gt;%</span><span class="fu">data.frame</span>()<span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>fives</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      FID
1 5205639
2 5207178
3 5208756
4 5210382
5 5211089</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>SCIM_17_20 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FID <span class="sc">%in%</span> fives<span class="sc">$</span>FID)<span class="sc">%&gt;%</span><span class="fu">select</span>(FID,SCIM_TOTAL,DATUM) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(FID,DATUM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   FID     SCIM_TOTAL DATUM              
   &lt;chr&gt;   &lt;chr&gt;      &lt;dttm&gt;             
 1 5205639 15         2015-10-29 00:00:00
 2 5205639 21         2017-08-16 00:00:00
 3 5207178 17         2016-01-01 00:00:00
 4 5207178 42         2017-04-25 00:00:00
 5 5208756 14         2016-03-01 00:00:00
 6 5208756 63         2017-02-08 00:00:00
 7 5210382 14         2017-04-11 00:00:00
 8 5210382 14         2017-04-19 00:00:00
 9 5211089 12         2016-05-01 00:00:00
10 5211089 84         2017-03-01 00:00:00</code></pre>
</div>
</div>
</section>
<section id="analysis-two-phases" class="level1">
<h1>Analysis two phases</h1>
<p>From the data set obtained before codes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(codes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  code1   date                code2  
  &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt;  
1 6012487 2017-12-07 00:00:00 6014266
2 6023881 2018-12-06 00:00:00 6025255
3 6028398 2019-04-09 00:00:00 6028919
4 6040865 2020-08-10 00:00:00 6041525
5 6043203 2020-10-30 00:00:00 6043916
6 6017204 2018-04-30 00:00:00 6018809</code></pre>
</div>
</div>
<p>There is a correspondence between both columns <span class="math inline">\(code_1\)</span> corresponds to the same patient identified by <span class="math inline">\(code_2\)</span>. The difference is that each code corresponds to a different phase. The acute phase and the rehabilitation phase. Additionally, is crucial to note that:</p>
<p>- There are not duplicated values in the table <span class="math inline">\(codes\)</span></p>
<p>- There are duplicated FID in the table <span class="math inline">\(SCIM\_17\_20.\)</span></p>
</section>
<section id="information-about-patients-diagnosis-and-treatments." class="level1">
<h1>Information about patients, diagnosis and treatments.</h1>
<p>In this stage we consider two data sets.</p>
<p>The mb is the dataset with information about health diagnosis, treatments, age, sex among others. The dataset fid_pid is a dataset that contains a correspondence between FID and PID PID: Patienten fallnummer that is the patient case number.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>mb<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">"C:/Users/boris/Desktop/SPZ hospital/SPZ-Project/mb.rds"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>fid_pid <span class="ot">&lt;-</span>  <span class="fu">readRDS</span>(<span class="st">"C:/Users/boris/Desktop/SPZ hospital/SPZ-Project/fidpid.rds"</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>fid_pid<span class="sc">%&gt;%</span><span class="fu">select</span>(PID)<span class="sc">%&gt;%</span><span class="fu">table</span>()<span class="sc">%&gt;%</span><span class="fu">data.frame</span>()<span class="sc">%&gt;%</span><span class="fu">select</span>(Freq)<span class="sc">%&gt;%</span> <span class="fu">table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Freq
   1    2    3    4    5    6    7    8    9   10   11   12   13   16 
1664  888  258  125   76   45   21   11   10    5    3    1    1    1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "gender"           "birth_date"       "age"              "residence"       
 [5] "entry_date"       "leave_date"       "stay_ICU"         "main_cost_unit"  
 [9] "main_diag"        "add_diag"         "sec_diag1"        "sec_diag2"       
[13] "sec_diag3"        "sec_diag4"        "sec_diag5"        "sec_diag6"       
[17] "sec_diag7"        "sec_diag8"        "main_treat"       "start_main_treat"
[21] "add_main"         "fur_treat1"       "fur_treat2"       "fur_treat3"      
[25] "fur_treat4"       "fur_treat5"       "fur_treat6"       "fur_treat7"      
[29] "fur_treat8"       "id"               "year"            </code></pre>
</div>
</div>
<p>We include variables that represent the time and cost for each intervention to every patient</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>time_cost<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">"time_cost.rds"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(time_cost)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"          "op_room"     "anaest"      "int_care"    "imag"       
 [6] "lab"         "physt"       "ergo"        "logo"        "non_med_ter"
[11] "nurs"        "psyc"        "year"       </code></pre>
</div>
</div>
<p>The units are given by:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>  unts<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"min"</span>,<span class="st">"min"</span>,<span class="st">"min"</span>,<span class="st">"chf"</span>,<span class="st">"chf"</span>,<span class="st">"min"</span>,<span class="st">"min"</span>,<span class="st">"min"</span>,<span class="st">"tp"</span>,<span class="st">"min"</span>,<span class="st">"tp"</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  unts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "min" "min" "min" "chf" "chf" "min" "min" "min" "tp"  "min" "tp" </code></pre>
</div>
</div>
<p>Summarizing, we have the next important data sets.</p>
<ul>
<li><p>mb</p></li>
<li><p>codes</p></li>
<li><p>SCIM_17_20</p></li>
<li><p>fid_pid</p></li>
<li><p>time_cost</p></li>
</ul>
</section>
<section id="evolution-of-scim" class="level1">
<h1>Evolution of SCIM</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>SCIM_17_20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()<span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="sc">-</span>Freq)<span class="sc">%&gt;%</span><span class="fu">head</span>(<span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      FID Freq
1 5205639    2
2 5207178    2
3 5208756    2
4 5210382    2
5 5211089    2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>mb<span class="sc">%&gt;%</span> <span class="fu">select</span>(id) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()<span class="sc">%&gt;%</span><span class="fu">arrange</span>(<span class="sc">-</span>Freq) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       id Freq
1 6006658    2
2 6008272    2
3 6008830    2
4 6009414    2
5 6009503    2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>time_cost <span class="sc">%&gt;%</span> <span class="fu">select</span>(id) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="sc">-</span>Freq) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       id Freq
1 5211529    2
2 6006658    2
3 6008272    2
4 6008830    2
5 6009414    2
6 6009503    2
7 6009636    2
8 6009808    2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>fid_pid <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()<span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="sc">-</span>Freq) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      FID Freq
1 5205639    1
2 5207178    1
3 5208756    1
4 5210382    1
5 5211089    1
6 5211529    1
7 5211936    1
8 5212187    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fid_pid <span class="sc">%&gt;%</span> <span class="fu">select</span>(PID) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()<span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="sc">-</span>Freq) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      PID Freq
1 0152021   16
2 0019699   13
3 0001323   12
4 0000374   11
5 0002657   11
6 0153996   11
7 0001984   10
8 0002447   10</code></pre>
</div>
</div>
<p>From the previous summaries we observe that in the table fip_pid, there are some PID codes repeated until <span class="math inline">\(16\)</span> times. It means that the patient considered was $16$ times in the clinic, each time with a different FID code.</p>
<p>In order to analyze the evolution of the SCIM value we consider the next steps.</p>
<p>Due to the importance of track the acute and rehabilitation phase we merge the mb dataset with codes. Note that an important issue could be the treatment of the codes for acute and rehabilitation phase. In order to deal with that we proceed as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>codes<span class="sc">$</span>uniq<span class="ot">&lt;-</span><span class="fu">paste</span>(<span class="st">"uni"</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(codes),<span class="at">sep=</span><span class="st">"_"</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>SCIM_17_20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4359</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>SCIM_17_20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID) <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">merge</span>(codes<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">ph=</span><span class="st">"acute"</span>),<span class="at">by.x=</span><span class="st">"FID"</span>,<span class="at">by.y=</span><span class="st">"code1"</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1638</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>P1<span class="ot">&lt;-</span>SCIM_17_20  <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">merge</span>(codes,<span class="at">by.x=</span><span class="st">"FID"</span>,<span class="at">by.y=</span><span class="st">"code1"</span>,<span class="at">all.x=</span><span class="cn">TRUE</span>)<span class="sc">%&gt;%</span> <span class="fu">select</span>(FID,code2,uniq,SCIM_TOTAL) </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(P1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      FID code2 uniq SCIM_TOTAL
1 5205639  &lt;NA&gt; &lt;NA&gt;         15
2 5205639  &lt;NA&gt; &lt;NA&gt;         21
3 5207178  &lt;NA&gt; &lt;NA&gt;         17
4 5207178  &lt;NA&gt; &lt;NA&gt;         42
5 5208756  &lt;NA&gt; &lt;NA&gt;         14
6 5208756  &lt;NA&gt; &lt;NA&gt;         63</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>P2<span class="ot">&lt;-</span>P1 <span class="sc">%&gt;%</span> <span class="fu">merge</span>(codes,<span class="at">by.x=</span><span class="st">"FID"</span>,<span class="at">by.y=</span><span class="st">"code2"</span>,<span class="at">all.x=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(FID,code1,code2,uniq.x,uniq.y,SCIM_TOTAL)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># For example</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(P2[<span class="fu">c</span>(<span class="dv">71</span>,<span class="dv">72</span>,<span class="dv">73</span>,<span class="dv">74</span>,<span class="dv">449</span>,<span class="dv">450</span>,<span class="dv">451</span>,<span class="dv">452</span>),])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        FID   code1   code2 uniq.x  uniq.y SCIM_TOTAL
71  5215438    &lt;NA&gt; 6004334 uni_34    &lt;NA&gt;         24
72  5215438    &lt;NA&gt; 6004334 uni_34    &lt;NA&gt;         25
73  5215452    &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;         52
74  5215452    &lt;NA&gt;    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;         73
449 6002536 5217254    &lt;NA&gt;   &lt;NA&gt; uni_247         22
450 6002536 5217254    &lt;NA&gt;   &lt;NA&gt; uni_247         76</code></pre>
</div>
</div>
<p>If everything is ok, when uniq.x has any value uni.y should be with &lt;NA&gt; and viceversa. The next chunk evaluates if both columns uniq.x and uniq.y are not empty at the same time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>P2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(uniq.x)<span class="sc">&amp;!</span><span class="fu">is.na</span>(uniq.y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FID        code1      code2      uniq.x     uniq.y     SCIM_TOTAL
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>P2<span class="sc">$</span>uniq.x<span class="ot">&lt;-</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(P2<span class="sc">$</span>uniq.x),<span class="st">""</span>,P2<span class="sc">$</span>uniq.x)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>P2<span class="sc">$</span>uniq.y<span class="ot">&lt;-</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(P2<span class="sc">$</span>uniq.y),<span class="st">""</span>,P2<span class="sc">$</span>uniq.y)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>P2<span class="sc">$</span>unique<span class="ot">&lt;-</span><span class="fu">paste</span>(P2<span class="sc">$</span>uniq.x,P2<span class="sc">$</span>uniq.y,<span class="at">sep=</span><span class="st">""</span>)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(P2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      FID code1 code2 uniq.x uniq.y SCIM_TOTAL unique
1 5205639  &lt;NA&gt;  &lt;NA&gt;                       15       
2 5205639  &lt;NA&gt;  &lt;NA&gt;                       21       
3 5207178  &lt;NA&gt;  &lt;NA&gt;                       17       
4 5207178  &lt;NA&gt;  &lt;NA&gt;                       42       
5 5208756  &lt;NA&gt;  &lt;NA&gt;                       14       
6 5208756  &lt;NA&gt;  &lt;NA&gt;                       63       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>P2<span class="sc">$</span>acute<span class="ot">&lt;-</span><span class="fu">ifelse</span>(P2<span class="sc">$</span>uniq.x<span class="sc">==</span><span class="st">""</span>,<span class="st">""</span>,<span class="st">"acute"</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>P2<span class="sc">$</span>rehab<span class="ot">&lt;-</span><span class="fu">ifelse</span>(P2<span class="sc">$</span>uniq.y<span class="sc">==</span><span class="st">""</span>,<span class="st">""</span>,<span class="st">"rehab"</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>P2<span class="sc">$</span>phase<span class="ot">&lt;-</span><span class="fu">paste</span>(P2<span class="sc">$</span>acute,P2<span class="sc">$</span>rehab,<span class="at">sep=</span><span class="st">""</span>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>P3<span class="ot">&lt;-</span>P2<span class="sc">%&gt;%</span> <span class="fu">select</span>(unique,FID,code1,code2,phase,SCIM_TOTAL)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(P3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  unique     FID code1 code2 phase SCIM_TOTAL
1        5205639  &lt;NA&gt;  &lt;NA&gt;               15
2        5205639  &lt;NA&gt;  &lt;NA&gt;               21
3        5207178  &lt;NA&gt;  &lt;NA&gt;               17
4        5207178  &lt;NA&gt;  &lt;NA&gt;               42
5        5208756  &lt;NA&gt;  &lt;NA&gt;               14
6        5208756  &lt;NA&gt;  &lt;NA&gt;               63</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>tabl<span class="ot">&lt;-</span><span class="fu">table</span>(P3<span class="sc">$</span>unique)<span class="sc">%&gt;%</span> <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="sc">-</span>Freq)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Var1 Freq
1          3976
2  uni_100    4
3 uni_1000    4
4 uni_1001    4
5 uni_1002    4
6 uni_1003    4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>P3<span class="sc">%&gt;%</span><span class="fu">filter</span>(unique <span class="sc">%in%</span> tabl[<span class="sc">-</span><span class="dv">1</span>,]<span class="sc">$</span>Var1) <span class="sc">%&gt;%</span> <span class="fu">merge</span>(fid_pid,<span class="at">by.x=</span><span class="st">"FID"</span>,<span class="at">by.y=</span><span class="st">"FID"</span>)<span class="sc">%&gt;%</span> <span class="fu">arrange</span>(PID,unique)<span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       FID unique   code1   code2 phase SCIM_TOTAL     PID
1  6012487  uni_1    &lt;NA&gt; 6014266 acute         39 0000362
2  6014266  uni_1 6012487    &lt;NA&gt; rehab         49 0000362
3  6025255  uni_2 6023881    &lt;NA&gt; rehab         28 0000362
4  6025255  uni_2 6023881    &lt;NA&gt; rehab         33 0000362
5  6028398  uni_3    &lt;NA&gt; 6028919 acute         51 0000374
6  6028919  uni_3 6028398    &lt;NA&gt; rehab         62 0000374
7  6040865  uni_4    &lt;NA&gt; 6041525 acute         28 0000374
8  6041525  uni_4 6040865    &lt;NA&gt; rehab          - 0000374
9  6043203  uni_5    &lt;NA&gt; 6043916 acute         36 0000374
10 6043916  uni_5 6043203    &lt;NA&gt; rehab         41 0000374
11 6043916  uni_5 6043203    &lt;NA&gt; rehab         50 0000374
12 6017204  uni_6    &lt;NA&gt; 6018809 acute          0 0000477
13 6017204  uni_6    &lt;NA&gt; 6018809 acute          0 0000477
14 6018809  uni_6 6017204    &lt;NA&gt; rehab          6 0000477
15 6018809  uni_6 6017204    &lt;NA&gt; rehab          0 0000477
16 6040437  uni_7    &lt;NA&gt; 6041208 acute         22 0000511
17 6040437  uni_7    &lt;NA&gt; 6041208 acute         19 0000511
18 6016770  uni_8    &lt;NA&gt; 6017875 acute         21 0000548
19 6016770  uni_8    &lt;NA&gt; 6017875 acute         21 0000548
20 6017875  uni_8 6016770    &lt;NA&gt; rehab         25 0000548</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>P4<span class="ot">&lt;-</span>P3<span class="sc">%&gt;%</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(FID))</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">#merge(P4,fid_pid,by.x="FID",by.y="FID") %&gt;% select(PID) %&gt;% table() %&gt;% data.frame()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>P4<span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "unique"     "FID"        "code1"      "code2"      "phase"     
[6] "SCIM_TOTAL"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(P4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  unique     FID code1 code2 phase SCIM_TOTAL
1        5205639  &lt;NA&gt;  &lt;NA&gt;               15
2        5205639  &lt;NA&gt;  &lt;NA&gt;               21
3        5207178  &lt;NA&gt;  &lt;NA&gt;               17
4        5207178  &lt;NA&gt;  &lt;NA&gt;               42
5        5208756  &lt;NA&gt;  &lt;NA&gt;               14
6        5208756  &lt;NA&gt;  &lt;NA&gt;               63</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>P5<span class="ot">&lt;-</span>P3<span class="sc">%&gt;%</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(FID))<span class="sc">%&gt;%</span><span class="fu">merge</span>(P4,fid_pid,<span class="at">by.x=</span><span class="st">"FID"</span>,<span class="at">by.y=</span><span class="st">"FID"</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(P5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      FID unique.x code1.x code2.x phase.x SCIM_TOTAL.x unique.y code1.y
1 5205639             &lt;NA&gt;    &lt;NA&gt;                   15             &lt;NA&gt;
2 5205639             &lt;NA&gt;    &lt;NA&gt;                   15             &lt;NA&gt;
3 5205639             &lt;NA&gt;    &lt;NA&gt;                   21             &lt;NA&gt;
4 5205639             &lt;NA&gt;    &lt;NA&gt;                   21             &lt;NA&gt;
5 5207178             &lt;NA&gt;    &lt;NA&gt;                   17             &lt;NA&gt;
6 5207178             &lt;NA&gt;    &lt;NA&gt;                   17             &lt;NA&gt;
  code2.y phase.y SCIM_TOTAL.y
1    &lt;NA&gt;                   15
2    &lt;NA&gt;                   21
3    &lt;NA&gt;                   15
4    &lt;NA&gt;                   21
5    &lt;NA&gt;                   17
6    &lt;NA&gt;                   42</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>